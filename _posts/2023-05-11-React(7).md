---
layout: single
title: "React, Hooks"
categories: Front-end
tag: React
author_profile: false
sidebar:
  nav: "docs"
# search: false
toc: true
---

**[ê³µì§€ì‚¬í•­]** ì˜ëª»ëœ ì •ë³´ë‚˜ ì˜¤íƒ€ì— í”¼ë“œë°± ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.:)
{: .notice--info}

# ğŸ” ê°œìš”

ì…ì‚¬í•˜ê¸° ì „ì— ë¶€íŠ¸ìº í”„ì—ì„œ ReactJSë¥¼ í•™ìŠµë„ í•˜ê³ , íŒ€ í”„ë¡œì íŠ¸ë„ ì§„í–‰í–ˆì—ˆì§€ë§Œ í˜„ì¬ íšŒì‚¬ì—ì„œ ë ˆê±°ì‹œ ê¸°ìˆ ë§Œì„ ì‚¬ìš©í•˜ì—¬ ê¸°ì–µì´ ì˜ ë‚˜ì§€ ì•ŠëŠ”ë‹¤.  
ë ˆê±°ì‹œ ê¸°ìˆ ì„ ReactJSë¡œ ë¦¬íŒ©í† ë§ë„ í•˜ê³  ì‹¶ë„, íŠ¹ì • ì¦ê¶Œì‚¬ì—ì„œ NextJSë¥¼ ì‚¬ìš©í•˜ê³  ìˆê¸°ì— ReactJSë¥¼ ë‹¤ì‹œ ê³µë¶€í•˜ê³ ì í•œë‹¤.  
ë‚˜ëŠ” í•™ìŠµí•˜ëŠ” ìˆœì„œê°€ ê°•ì˜ => ì±… or ê³µì‹ë¬¸ì„œ ìˆœìœ¼ë¡œ ì§„í–‰í•˜ê¸° ë•Œë¬¸ì— ê°•ì˜ëŠ” ê±´ë„ˆë›°ê³  'ë¦¬ì•¡íŠ¸ë¥¼ ë‹¤ë£¨ëŠ” ê¸°ìˆ 'ì´ë¼ëŠ” ì±…ìœ¼ë¡œ ê³µë¶€ë¥¼ ì‹œì‘í•˜ë ¤ê³  í•œë‹¤.  
ì±…ì„ ì½ìœ¼ë©° ì´ë¯¸ ì•Œê³  ìˆëŠ” ë‚´ìš©ë“¤ë³´ë‹¤ëŠ”, ê¸°ì–µì´ íë¦¿í•˜ê±°ë‚˜ ëª°ëë˜ ë‚´ìš©ì´ê±°ë‚˜ í—·ê°ˆë ¸ë˜ ë‚´ìš©ë“¤ì„ ì •ë¦¬í•˜ë ¤ê³  í•œë‹¤.

# 8ì¥, Hooks

`Hooks`ëŠ” ë¦¬ì•¡íŠ¸ v16.8ì— ìƒˆë¡œ ë„ì…ëœ ê¸°ëŠ¥ìœ¼ë¡œ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œë„ ê¸°ì¡´ì˜ í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œ í•  ìˆ˜ ì—†ì—ˆë˜ ë‹¤ì–‘í•œ ì‘ì—…ì„ í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

## 8.1 useState

í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œë„ ê°€ë³€ì ì¸ ìƒíƒœë¥¼ ì§€ë‹ ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

```js
import { useState } from "react";

const [value, setValue] = useState();
```

useState í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„°ì—ëŠ” ìƒíƒœì˜ ê¸°ë³¸ê°’ì„ ë„£ì–´ì¤€ë‹¤. ì´ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ë©´ ë°°ì—´ì„ ë°˜í™˜í•˜ëŠ”ë°, ì²« ë²ˆì§¸ ì›ì†ŒëŠ” ìƒíƒœ ê°’, ë‘ ë²ˆì§¸ ì›ì†ŒëŠ” ìƒíƒœë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤. ì´ í•¨ìˆ˜ì— íŒŒë¼ë¯¸í„°ë¥¼ ë„£ì–´ì„œ í˜¸ì¶œí•˜ë©´ ì „ë‹¬ë°›ì€ íŒŒë¼ë¯¸í„°ë¡œ ê°’ì´ ë°”ë€Œê³  ì»´í¬ë„ŒíŠ¸ëŠ” ì •ìƒì ìœ¼ë¡œ ë¦¬ë Œë”ë§ëœë‹¤.  
í•˜ë‚˜ì˜ useState í•¨ìˆ˜ëŠ” í•˜ë‚˜ì˜ ìƒíƒœ ê°’ë§Œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.

```js
import { useState } from "react";

const Info = () => {
  const [name, setName] = useState("");
  const [nickname, setNickname] = useState("");

  const onChangeName = (e) => {
    setName(e.target.value);
  };

  const onChangeNickname = (e) => {
    setNickname(e.target.value);
  };

  return (
    <div>
      <div>
        <input value={name} onChange={onChangeName} />
        <input value={nickname} onChange={onChangeNickname} />
      </div>
      <div>
        <div>
          <b>ì´ë¦„:</b> {name}
        </div>
        <div>
          <b>ë‹‰ë„¤ì„:</b> {nickname}
        </div>
      </div>
    </div>
  );
};

export default Info;
```

## 8.2 useEffect

ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë•Œë§ˆë‹¤ íŠ¹ì • ì‘ì—…ì„ ìˆ˜í–‰í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì˜ componentDidMountì™€ componentDidUpdateë¥¼ í•©ì¹œ í˜•íƒœë¡œ ë³´ì•„ë„ ë¬´ë°©í•˜ë‹¤.

```js
import { useEffect } from "react";

useEffect(setup, dependencies?)
```

```js
import { useState, useEffect } from "react";

const Info = () => {
  const [name, setName] = useState("");
  const [nickname, setNickname] = useState("");

  useEffect(() => {
    console.log("ë Œë”ë§ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!");
    console.log({
      name,
      nickname,
    });
  });

  const onChangeName = (e) => {
    setName(e.target.value);
  };

  const onChangeNickname = (e) => {
    setNickname(e.target.value);
  };

  return (
    <div>
      <div>
        <input value={name} onChange={onChangeName} />
        <input value={nickname} onChange={onChangeNickname} />
      </div>
      <div>
        <div>
          <b>ì´ë¦„:</b> {name}
        </div>
        <div>
          <b>ë‹‰ë„¤ì„:</b> {nickname}
        </div>
      </div>
    </div>
  );
};

export default Info;
```

### 8.2.1 ë§ˆìš´íŠ¸ë  ë•Œë§Œ ì‹¤í–‰í•˜ê³  ì‹¶ì„ ë•Œ

```js
useEffect(() => {
  console.log("ë§ˆìš´íŠ¸ë  ë•Œë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.");
}, []);
```

useEffectì—ì„œ ì„¤ì •í•œ í•¨ìˆ˜ë¥¼ ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ë§¨ ì²˜ìŒ ë Œë”ë§ë  ë•Œë§Œ ì‹¤í–‰í•˜ê³ , ì—…ë°ì´íŠ¸ë  ë•ŒëŠ” ì‹¤í–‰í•˜ì§€ ì•Šìœ¼ë ¤ë©´ í•¨ìˆ˜ì˜ ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ ë¹„ì–´ ìˆëŠ” ë°°ì—´ì„ ë„£ì–´ì£¼ë©´ ëœë‹¤.

### 8.2.2 íŠ¹ì • ê°’ì´ ì—…ë°ì´íŠ¸ë  ë•Œë§Œ ì‹¤í–‰í•˜ê³  ì‹¶ì„ ë•Œ

```js
// í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸
componentDidUpdate(prevProps, prevState) {
  if (prevProps.value !== this.props.value) {
    doSomething();
  }
}
```

useEffect ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë˜ëŠ” ë°°ì—´ ì•ˆì— ê²€ì‚¬í•˜ê³  ì‹¶ì€ ê°’ì„ ë„£ì–´ì£¼ë©´ ëœë‹¤. ë°°ì—´ ì•ˆì—ëŠ” useStateë¥¼ í†µí•´ ê´€ë¦¬í•˜ê³  ìˆëŠ” ìƒíƒœë¥¼ ë„£ì–´ì£¼ì–´ë„ ë˜ê³ , propsë¡œ ì „ë‹¬ë°›ì€ ê°’ì„ ë„£ì–´ì£¼ì–´ë„ ëœë‹¤.

```js
// í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸
useEffect(() => {
  console.log(name);
}, [name]);
```

### 8.2.3 ë’·ì •ë¦¬í•˜ê¸°

ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ ë˜ê¸° ì „ì´ë‚˜ ì—…ë°ì´íŠ¸ë˜ê¸° ì§ì „ì— ì–´ë– í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ì‹¶ë‹¤ë©´ useEffectì—ì„œ ë’·ì •ë¦¬(cleanup) í•¨ìˆ˜ë¥¼ ë°˜í™˜í•´ ì£¼ì–´ì•¼ í•œë‹¤. ë Œë”ë§ ë ë–„ë§ˆë‹¤ ë’·ì •ë¦¬ í•¨ìˆ˜ê°€ ê³„ì† ë‚˜íƒ€ë‚˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  ë’·ì •ë¦¬ í•¨ìˆ˜ê°€ í˜¸ì¶œë  ë•ŒëŠ” ì—…ë°ì´íŠ¸ë˜ê¸° ì§ì „ì˜ ê°’ì„ ë³´ì—¬ì¤€ë‹¤.

```js
useEffect(() => {
  console.log("effect");
  console.log(name);
  return () => {
    console.log("cleanup");
    console.log(name);
  };
}, [name]);
```

ì˜¤ì§ ì–¸ë§ˆìš´íŠ¸ë  ë–„ë§Œ ë’·ì •ë¦¬ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ì‹¶ë‹¤ë©´, useEffect í•¨ìˆ˜ì˜ ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— ë¹„ì–´ ìˆëŠ” ë°°ì—´ì„ ë„£ìœ¼ë©´ ëœë‹¤.

```js
useEffect(() => {
  console.log("effect");
  return () => {
    console.log("unmount");
  };
}, []);
```

## 8.3 useReducer

useStateë³´ë‹¤ ë” ë‹¤ì–‘í•œ ì»´í¬ë„ŒíŠ¸ ìƒí™©ì— ë”°ë¼ ë‹¤ì–‘í•œ ìƒíƒœë¥¼ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•´ ì£¼ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” Hookì´ë‹¤. ë¦¬ë“€ì„œëŠ” í˜„ì¬ ìƒíƒœ, ê·¸ë¦¬ê³  ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ í•„ìš”í•œ ì •ë³´ë¥¼ ë‹´ì€ ì•¡ì…˜ ê°’ì„ ì „ë‹¬ë°›ì•„ ìƒˆë¡œìš´ ìƒíƒœë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤. ë¦¬ë“€ì„œ í•¨ìˆ˜ì—ì„œ ìƒˆë¡œìš´ ìƒíƒœë¥¼ ë§Œë“¤ ë•ŒëŠ” ë°˜ë“œì‹œ ë¶ˆë³€ì„±ì„ ì§€ì¼œì£¼ì–´ì•¼ í•œë‹¤.  
ê°€ì¥ í° ì¥ì ì€ ì»´í¬ë„ŒíŠ¸ ì—…ë°ì´íŠ¸ ë¡œì§ì„ ì»´í¬ë„ŒíŠ¸ ë°”ê¹¥ìœ¼ë¡œ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.

```js
function reducer(state, action) {
  return { ... }; // ë¶ˆë³€ì„±ì„ ì§€í‚¤ë©´ì„œ ì—…ë°ì´íŠ¸í•œ ìƒˆë¡œìš´ ìƒíƒœë¥¼ ë°˜í™˜í•œë‹¤.
}
```

ì•¡ì…˜ ê°’ì€ ì£¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ í˜•íƒœë¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤.

```js
{
  type: 'INCREMENT',
  // ë‹¤ë¥¸ ê°’ë“¤ì´ í•„ìš”í•˜ë‹¤ë©´ ì¶”ê°€ë¡œ ë“¤ì–´ê°
}
```

useReducerì—ì„œ ì‚¬ìš©í•˜ëŠ” ì•¡ì…˜ ê°ì²´ëŠ” ë°˜ë“œì‹œ typeì„ ì§€ë‹ˆê³  ìˆì„ í•„ìš”ê°€ ì—†ë‹¤. ì‹¬ì§€ì–´ ê°ì²´ê°€ ì•„ë‹ˆë¼ ë¬¸ìì—´ì´ë‚˜ ìˆ«ìì—¬ë„ ìƒê´€ì—†ë‹¤.

### 8.3.1 ì¹´ìš´í„° êµ¬í˜„í•˜ê¸°

```js
// stateê°’, dispatchí•¨ìˆ˜
// stateê°’ì€ í˜„ì¬ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ìƒíƒœ, dispatchëŠ” ì•¡ì…˜ì„ ë°œìƒì‹œí‚¤ëŠ” í•¨ìˆ˜
// dispatch(action)ê³¼ ê°™ì€ í˜•íƒœë¡œ í•¨ìˆ˜ ì•ˆì— íŒŒë¼ë¯¸í„°ë¡œ ì•¡ì…˜ ê°’ì„ ë„£ì–´ì£¼ë©´ ë¦¬ë“€ì„œ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” êµ¬ì¡°
const [state, dispatch] = useReducer(reducerí•¨ìˆ˜, reducerì˜ê¸°ë³¸ê°’);
```

```js
// Counter.js
import { useReducer } from "react";

function reducer(state, action) {
  // action.typeì— ë”°ë¼ ë‹¤ë¥¸ ì‘ì—… ìˆ˜í–‰
  switch (action.type) {
    case "INCREMENT":
      return { value: state.value + 1 };
    case "DECREMENT":
      return { value: state.value - 1 };
    default:
      // ì•„ë¬´ê²ƒë„ í•´ë‹¹ë˜ì§€ ì•Šì„ ë•Œ ê¸°ì¡´ ìƒíƒœ ë°˜í™˜
      return state;
  }
}

const Counter = () => {
  const [state, dispatch] = useReducer(reducer, { value: 0 });

  return (
    <div>
      <p>
        í˜„ì¬ ì¹´ìš´í„° ê°’ì€ <b>{state.value}</b>ì…ë‹ˆë‹¤.
      </p>
      <button onClick={() => dispatch({ type: "INCREMENT" })}>+1</button>
      <button onClick={() => dispatch({ type: "DECREMENT" })}>-1</button>
    </div>
  );
};

export default Counter;
```

### 8.3.2 ì¸í’‹ ìƒíƒœ ê´€ë¦¬í•˜ê¸°

useReducerì—ì„œì˜ ì•¡ì…˜ì€ ê·¸ ì–´ë–¤ ê°’ë„ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤. ì´ëŸ°ì‹ìœ¼ë¡œ ì¸í’‹ì„ ê´€ë¦¬í•˜ë©´ ì•„ë¬´ë¦¬ ì¸í’‹ì´ ê°œìˆ˜ê°€ ë§ì•„ì ¸ë„ ì½”ë“œë¥¼ ì§§ê³  ê¹”ë”í•˜ê²Œ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.

```js
// Info.js
import { useReducer } from "react";

function reducer(state, action) {
  return {
    ...state,
    [action.name]: action.value,
  };
}

const Info = () => {
  const [state, dispatch] = useReducer(reducer, {
    name: "",
    nickname: "",
  });
  const { name, nickname } = state;
  const onChange = (e) => {
    dispatch(e.target);
  };

  return (
    <div>
      <div>
        <input name="name" value={name} onChange={onChange} />
        <input name="nickname" value={nickname} onChange={onChange} />
      </div>
      <div>
        <div>
          <b>ì´ë¦„:</b> {name}
        </div>
        <div>
          <b>ë‹‰ë„¤ì„:</b> {nickname}
        </div>
      </div>
    </div>
  );
};

export default Info;
```

## 8.4 useMemo

useMemoë¥¼ ì‚¬ìš©í•˜ë©´ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ë°œìƒí•˜ëŠ” ì—°ì‚°ì„ ìµœì í™”í•  ìˆ˜ ìˆë‹¤.

```js
const cachedValue = useMemo(ìƒíƒœë¥¼ë³€ê²½í•˜ëŠ”í•¨ìˆ˜, ê°ì‹œí•˜ëŠ”ê°’ë“¤);
```

```js
// Average.js
// input ë‚´ìš©ì´ ë°”ë€” ë–„ì—ë„ getAverage í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ê²ƒì„ í™•ì¸
// ì´ê²ƒì€ ë¹„íš¨ìœ¨ì 
import { useState } from "react";

const getAverage = (numbers) => {
  console.log("í‰ê· ê°’ ê³„ì‚° ì¤‘..");
  if (numbers.length === 0) return 0;
  const sum = numbers.reduce((a, b) => a + b);
  return sum / numbers.length;
};

const Average = () => {
  const [list, setList] = useState([]);
  const [number, setNumber] = useState("");

  const onChange = (e) => {
    setNumber(e.target.value);
  };

  const onInsert = (e) => {
    const nextList = list.concat(parseInt(number));
    setList(nextList);
    setNumber("");
  };

  return (
    <div>
      <input value={number} onChange={onChange} />
      <button onClick={onInsert}>ë“±ë¡</button>
      <ul>
        {list.map((value, index) => (
          <li key={index}>{value}</li>
        ))}
      </ul>
      <div>
        <b>í‰ê· ê°’:</b> {getAverage(list)}
      </div>
    </div>
  );
};

export default Average;
```

ë Œë”ë§í•˜ëŠ” ê³¼ì •ì—ì„œ íŠ¹ì • ê°’ì´ ë°”ë€Œì—ˆì„ ë–„ë§Œ ì—°ì‚°ì„ ì‹¤í–‰í•˜ê³ , ì›í•˜ëŠ” ê°’ì´ ë°”ë€Œì§€ ì•Šì•˜ë‹¤ë©´ ì´ì „ì— ì—°ì‚°í–ˆë˜ ê²°ê³¼ë¥¼ ë‹¤ì‹œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤.

```js
// Average.js
import { useState, useMemo } from "react";

const getAverage = (numbers) => {
  console.log("í‰ê· ê°’ ê³„ì‚° ì¤‘..");
  if (numbers.length === 0) return 0;
  const sum = numbers.reduce((a, b) => a + b);
  return sum / numbers.length;
};

const Average = () => {
  const [list, setList] = useState([]);
  const [number, setNumber] = useState("");

  const onChange = (e) => {
    setNumber(e.target.value);
  };

  const onInsert = (e) => {
    const nextList = list.concat(parseInt(number));
    setList(nextList);
    setNumber("");
  };

  const avg = useMemo(() => getAverage(list), [list]);

  return (
    <div>
      <input value={number} onChange={onChange} />
      <button onClick={onInsert}>ë“±ë¡</button>
      <ul>
        {list.map((value, index) => (
          <li key={index}>{value}</li>
        ))}
      </ul>
      <div>
        <b>í‰ê· ê°’:</b> {avg}
      </div>
    </div>
  );
};
```

## 8.5 useCallback

useMemoì™€ ìƒë‹¹íˆ ë¹„ìŠ·í•œ í•¨ìˆ˜ì´ë‹¤. ì£¼ë¡œ ë Œë”ë§ ì„±ëŠ¥ì„ ìµœì í™”í•´ì•¼ í•˜ëŠ” ìƒí™©ì—ì„œ ì‚¬ìš©í•œë‹¤. ì´ Hookì„ ì‚¬ìš©í•˜ë©´ ë§Œë“¤ì–´ë†¨ë˜ í•¨ìˆ˜ë¥¼ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
ë³´í†µì€ ë¦¬ë Œë”ë§ ë  ë•Œë§ˆë‹¤ ìƒˆë¡œ ë§Œë“¤ì–´ì§„ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œ ëœë‹¤. ì»´í¬ë„ŒíŠ¸ì˜ ë Œë”ë§ì´ ìì£¼ ë°œìƒí•˜ê±°ë‚˜ ë Œë”ë§í•´ì•¼ í•  ì»´í¬ë„ŒíŠ¸ì˜ ê°œìˆ˜ê°€ ë§ì•„ì§€ë©´ ì´ ë¶€ë¶„ì„ ìµœì í™”í•´ ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤.

```js
// fn: ìºì‹œí•˜ë ¤ëŠ” í•¨ìˆ˜, dependencies: ì½”ë“œ ë‚´ë¶€ì—ì„œ ì°¸ì¡°ë˜ëŠ” ëª¨ë“  ë°˜ì‘ ê°’ ëª©ë¡
const cachedFn = useCallback(fn, dependencies);
```

ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— ë¹„ì–´ ìˆëŠ” ë°°ì—´ì„ ë„£ê²Œ ë˜ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë•Œ ë§Œë“¤ì—ˆë˜ í•¨ìˆ˜ë¥¼ ê³„ì†í•´ì„œ ì¬ì‚¬ìš©í•˜ê²Œ ë˜ë©°, ë°°ì—´ ì•ˆì— ì–´ë–¤ ê°’ì„ ë„£ê²Œ ë˜ë©´ ì¸í’‹ ë‚´ìš©ì´ ë°”ë€Œê±°ë‚˜ ìƒˆë¡œìš´ í•­ëª©ì´ ì¶”ê°€ë  ë•Œ ìƒˆë¡œ ë§Œë“¤ì–´ì§„ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œ ëœë‹¤. í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ìƒíƒœ ê°’ì— ì˜ì¡´í•´ì•¼ í•  ë•ŒëŠ” ê·¸ ê°’ì„ ë°˜ë“œì‹œ ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„° ì•ˆì— í¬í•¨ì‹œì¼œ ì£¼ì–´ì•¼ í•œë‹¤.

```js
// Average.js
import { useState, useMemo, useCallback } from "react";

const getAverage = (numbers) => {
  console.log("í‰ê· ê°’ ê³„ì‚° ì¤‘..");
  if (numbers.length === 0) return 0;
  const sum = numbers.reduce((a, b) => a + b);
  return sum / numbers.length;
};

const Average = () => {
  const [list, setList] = useState([]);
  const [number, setNumber] = useState("");

  const onChange = useCallback((e) => {
    setNumber(e.target.value);
  }, []); // ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë Œë”ë§ë  ë•Œë§Œ í•¨ìˆ˜ ìƒì„±

  const onInsert = useCallback(() => {
    const nextList = list.concat(parseInt(number));
    setList(nextList);
    setNumber("");
  }, [number, list]); // number í˜¹ì€ listê°€ ë°”ë€Œì—ˆì„ ë•Œë§Œ í•¨ìˆ˜ ìƒì„±

  const avg = useMemo(() => getAverage(list), [list]);

  return (
    <div>
      <input value={number} onChange={onChange} />
      <button onClick={onInsert}>ë“±ë¡</button>
      <ul>
        {list.map((value, index) => (
          <li key={index}>{value}</li>
        ))}
      </ul>
      <div>
        <b>í‰ê· ê°’:</b> {avg}
      </div>
    </div>
  );
};

export default Average;
```

ìˆ«ì, ë¬¸ìì—´, ê°ì²´ì²˜ëŸ¼ ì¼ë°˜ ê°’ì„ ì¬ì‚¬ìš©í•˜ë ¤ë©´ `useMemo`ë¥¼ ì‚¬ìš©í•˜ê³ , í•¨ìˆ˜ë¥¼ ì¬ì‚¬ìš©í•˜ë ¤ë©´ `useCallback`ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

```js
useCallback(() => {
  console.log("hello world!");
}, []);

useMemo(() => {
  const fn = () => {
    console.log("hello world!");
  };
  return fn;
}, []);
```

## 8.6 useRef

í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ refë¥¼ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤.

```js
import { useRef } from "react";

const ref = useRef(initialValue);
```

useRefë¥¼ ì‚¬ìš©í•˜ì—¬ refë¥¼ ì„¤ì •í•˜ë©´ useRefë¥¼ í†µí•´ ë§Œë“  ê°ì²´ ì•ˆì˜ current ê°’ì´ ì‹¤ì œ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ê°€ë¦¬í‚¨ë‹¤.

```js
import { useState, useMemo, useCallback, useRef } from "react";

const getAverage = (numbers) => {
  console.log("í‰ê· ê°’ ê³„ì‚° ì¤‘..");
  if (numbers.length === 0) return 0;
  const sum = numbers.reduce((a, b) => a + b);
  return sum / numbers.length;
};

const Average = () => {
  const [list, setList] = useState([]);
  const [number, setNumber] = useState("");
  const inputEl = useRef(null);

  const onChange = useCallback((e) => {
    setNumber(e.target.value);
  }, []); // ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë Œë”ë§ë  ë•Œë§Œ í•¨ìˆ˜ ìƒì„±

  const onInsert = useCallback(() => {
    const nextList = list.concat(parseInt(number));
    setList(nextList);
    setNumber("");
    inputEl.current.focus();
  }, [number, list]); // number í˜¹ì€ listê°€ ë°”ë€Œì—ˆì„ ë•Œë§Œ í•¨ìˆ˜ ìƒì„±

  const avg = useMemo(() => getAverage(list), [list]);

  return (
    <div>
      <input value={number} onChange={onChange} ref={inputEl} />
      <button onClick={onInsert}>ë“±ë¡</button>
      <ul>
        {list.map((value, index) => (
          <li key={index}>{value}</li>
        ))}
      </ul>
      <div>
        <b>í‰ê· ê°’:</b> {avg}
      </div>
    </div>
  );
};

export default Average;
```

### 8.6.1 ë¡œì»¬ ë³€ìˆ˜ ì‚¬ìš©í•˜ê¸°

ì¶”ê°€ë¡œ ì»´í¬ë„ŒíŠ¸ ë¡œì»¬ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•  ë•Œë„ useRefë¥¼ í™œìš©í•  ìˆ˜ ìˆë‹¤. ì—¬ê¸°ì„œ ë¡œì»¬ ë³€ìˆ˜ë€ ë Œë”ë§ê³¼ ìƒê´€ì—†ì´ ë°”ë€” ìˆ˜ ìˆëŠ” ê°’ì„ ì˜ë¯¸í•œë‹¤.

```js
// í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸
import { Component } from "react";

class MyComponent extends Component {
  id = 1;
  setId = (n) => {
    this.id = n;
  };
  printId = () => {
    console.log(this.id);
  };
  render() {
    return <div>MyComponent</div>;
  }
}

export default MyComponent;
```

```js
// í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸
import { useRef } from "react";

const RefSample = () => {
  const id = useRef(1);
  const setId = (n) => {
    id.current = n;
  };
  const printId = () => {
    console.log(id.current);
  };
  return <div>refSample</div>;
};

export default RefSample;
```

ì´ë ‡ê²Œ ref ì•ˆì˜ ê°’ì´ ë°”ë€Œì–´ë„ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì—ëŠ” ì£¼ì˜í•´ì•¼ í•œë‹¤. ë Œë”ë§ê³¼ ê´€ë ¨ë˜ì§€ ì•Šì€ ê°’ì„ ê´€ë¦¬í•  ë•Œë§Œ ì´ëŸ¬í•œ ë°©ì‹ìœ¼ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼ í•œë‹¤.

## 8.7 ì»¤ìŠ¤í…€ Hooks ë§Œë“¤ê¸°

ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë¹„ìŠ·í•œ ê¸°ëŠ¥ì„ ê³µìœ í•  ê²½ìš°, ì´ë¥¼ ë‚˜ë§Œì˜ Hookìœ¼ë¡œ ì‘ì„±í•˜ì—¬ ë¡œì§ì„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```js
// useInputs.js
import { useReducer } from "react";

function reducer(state, action) {
  return {
    ...state,
    [action.name]: action.value,
  };
}

export default function useInputs(initialForm) {
  const [state, dispatch] = useReducer(reducer, initialForm);
  const onChange = (e) => {
    dispatch(e.target);
  };
  return [state, onChange];
}
```

```js
// Info.js
import useInputs from "./useInputs";

const Info = () => {
  const [state, onChange] = useInputs({
    name: "",
    nickname: "",
  });
  const { name, nickname } = state;

  return (
    <div>
      <div>
        <input name="name" value={name} onChange={onChange} />
        <input name="nickname" value={nickname} onChange={onChange} />
      </div>
      <div>
        <div>
          <b>ì´ë¦„:</b> {name}
        </div>
        <div>
          <b>ë‹‰ë„¤ì„:</b> {nickname}
        </div>
      </div>
    </div>
  );
};
```

## 8.8 ë‹¤ë¥¸ Hooks

ë‹¤ë¥¸ ê°œë°œìê°€ ë§Œë“  ë‹¤ì–‘í•œ Hooks ë¦¬ìŠ¤íŠ¸ëŠ” ë‹¤ìŒ ë§í¬ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

- [https://nikgraf.github.io/react-hooks/](https://nikgraf.github.io/react-hooks/)
- [htts://github.com/rehooks/awesome-react-hooks](htts://github.com/rehooks/awesome-react-hooks)

---

ì¶œì²˜

- [https://react.dev/](https://react.dev/)
- ë¦¬ì•¡íŠ¸ë¥¼ ë‹¤ë£¨ëŠ” ê¸°ìˆ 
